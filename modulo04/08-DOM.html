<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DOM - Adicionando e removendo elementos</title>
</head>
<body> 
  <header>
    <h1>Cadastro de Usuários</h1>
  </header>
  <main>
    <section>
      <form>
        <input type="text" name="usuario" id="usuario" required autofocus>
        <button type="submit" id="submitName">Inserir</button>
      </form>
    </section>

    <section>
      <h2>Usuários Cadastrados</h2>
      <ul></ul>
    </section>

  </main>
  <script>
    const inputUsuario = document.querySelector('input#usuario');
    const form = document.querySelector('form');
    const button = document.querySelector('button#submitName');
    const ul = document.querySelector('ul');
   
    form.addEventListener('submit', function(evt) {
      evt.preventDefault();

      button.onclick = (() => {
        createUser(getInput());
      })();

      function clearInput(){
        inputUsuario.value = ''
      };

      function getInput(){
        const userName = inputUsuario.value;
        clearInput();
        return userName
      };

      function createUser(newUser) {
        const li = document.createElement('li');
        const span = document.createElement('span');
        li.id = newUser;
        span.textContent = newUser;
        
        ul.appendChild(li);
        li.append(span);
        createRemoveButton(li);
      };

      function createRemoveButton(buttonId) {
        const removeButton = document.createElement('button');
        removeButton.id = buttonId;
        removeButton.textContent = 'Remover';
        buttonId.appendChild(removeButton);
        removeButton.onclick = (() => {
          removerButton(buttonId)
        })
      };

      function removerButton(buttonId) {
         buttonId.remove() 
        };

      })
  </script>
</body>
</html>